
## 객체 지향 프로그래밍
추상화, 상속, 다형성, 캡슐화

## 객체 지향 설계 5가지 원칙
SIP(단일 책임), OCP(개방 폐쇄), ISP(인터페이스 분리), LSP(리스코프 치환), DIP(의존관계 역전) 


스프링은 객체 지향 프로그래밍의 원칙에 맞게 설계되어있음.
역할과 구현을 명확하게 분리해야 함.


## 회원, 주문, 할인 도메인 설계
순수 자바 코드로 객체를 생성하며 설계하게 되면 새로운 정률 할인 정책 등 개발했을 때 다형성 덕분에 개발에는 문제가 없음.
다만, 클라이언트 코드인 주문 서비스 구현체도 함께 변경을 해야함.
순수 자바 코드에서 new ~~ 로 객체를 생성해서 넣어주기 때문에 변경해주어야 함.
즉, 주문 서비스 클라이언트가 인터페이스인 할인 정책 뿐 아니라 구체 클래스인 정액 할인 정책도 함께 의존하여 DIP 위반.


## 관심사의 분리 필요
기존에는 클라이언트가 의존하는 서버 구현 객체를 직접 생성하고 실행함.
공연에 비유하면 남자 주인공이 공연도 하고 여자 주인공을 초빙하는 다양한 책임을 가짐.
공연 구성 및 배우 섭외, 지정 책임 담당하는 **공연 기획자**의 역할 필요.
새로운 AppConfig 클래스를 만들어 이 역할을 담당하게 함.
AppConfig는 전체 동작 방식 구성(config)하기 위해 구현 객체 생성하고 연결하는 책임.
즉, 클라이언트 객체는 권한이 줄고 책임이 명확해짐.
이렇게 하면 사용영역과 구성 영역(AppConfig)이 나뉘게 됨.
정책이 바뀌면 구성 영역만 고치면 됨.


## IOC, DI, 컨테이너
#### 제어의 역전(Inversion of Control)
관심사 분리 이전에 구현 객체가 프로그램의 제어 흐름을 조정했음.
이제 AppConfig가 등장하면서 구현 객체는 자신의 로직을 실행하는 역할만 담당.
ex) OrderSeviceImpl은 필요한 인터페이스를 호출하지만 어떤 구현 객체들이 실행되는지 모름.
즉, 프로그램 제어 흐름은 AppConfig가 가져가고 외부에서 관리될 때 제어의 역전이라 함.

ps. 제어의 역전을 알게 되면 프레임워크와 라이브러리의 차이를 명확히 알 수 있음.
프레임워크 : 내가 작성한 코드를 제어하고 대신 실행함. (JUnit)
라이브러리 : 내가 작성한 코드가 직접 제어의 흐름을 담당함.

#### 의존관계 주입(Dependency Injection)
2가지 의존관계
- 정적인 클래스 의존관계.
	클래스가 사용하는 import 코드만 보고 의존관계를 쉽게 파악할 수 있음.
	애플리케이션을 실행하지 않아도 분석 가능.
	ex) intellij에는 show dependency 같은 tool도 있음.
	 
- 실행 시점에 결정되는 동적인 객체(인스턴스) 의존관계
	애플리케이션이 실행 시점에 실제 생성된 객체 인스턴스의 참조가 연결된 의존 관계.
	클래스 의존관계만으로는 실제 어떤 객체가 주입될지 알 수 없음.

즉, 실행 시점(런타임)에 외부에서 실제 구현 객체를 생성하고 클라이언트에 전달해서 클라이언트와 서버의 실제 의존관계가 연결되는 것을 의존 관계 주입이라고 함.
객체 인스턴스를 생성하고 그 참조 값을 전달해서 연결.
의존 관계 주입을 사용하면 정적인 클래스 의존관계를 변경하지 않고 동적인 객체 인스턴스 의존관계를 쉽게 변경할 수 있음. (당연히 구현 로직말고 의존 관계에 대해 손댈 것이 없다는 뜻)

#### IOC 컨테이너, DI 컨테이너
AppConfig처럼 객체 생성, 관리하면서 의존관계를 연결해주는 것을 IOC 컨테이너 또는 DI 컨테이너라 함.
의존 관계 주입에 초점 맞추어 최근에는 주로 DI 컨테이너라고 함. (또는 어샘블러, 오브젝트 팩토리)
(IOC는 범용적인 용어다 보니)
Spring포함 여러 오픈소스가 이 역할을 함.



## 스프링 전환
AppConfig 항목들을 @Configuration, @Bean 어노테이션.
AppConfig 객체 생성 부분은 ApplicationContext(여기가 스프링 컨테이너) 모든 걸 관리.
ApplicationContxt applicationContext = new AnnotationConfigApplicationContext(AppConfig.class)

